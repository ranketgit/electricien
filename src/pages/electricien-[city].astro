---
import Layout from '../layouts/Layout.astro';
import { data as locationsData } from '../data/locations.ts';
import { generateSchema } from "../seo/schema";

export async function getStaticPaths() {
  const paths = [];
  locationsData.forEach(province => {
    province.Cities.forEach(city => {
      paths.push({
        params: { city: city.slug }, 
        props: { 
            currentCity: city, 
            currentProvinceName: province.State,
            currentProvinceSlug: province.slug 
        },
      });
    });
  });
  return paths;
}

const { currentCity, currentProvinceName, currentProvinceSlug } = Astro.props;

const heroImageUrl = `/homepage/electrician-hero-city.avif`; // Using your image path, ensure it's suitable for a background
const h1Content = `√âlectricien √† ${currentCity.cityName} : Votre Expert Local pour Tous Vos Besoins √âlectriques`;
const heroIntroP1 = `Vous recherchez un √©lectricien comp√©tent et r√©actif √† ${currentCity.cityName} ? Elec Express est votre partenaire de confiance pour tous vos travaux √©lectriques. Que vous ayez besoin d'un d√©pannage √©lectrique imm√©diat, d'une nouvelle installation ou d'une mise aux normes RGIE de votre syst√®me √† ${currentCity.cityName}, notre √©quipe d'artisans √©lectriciens qualifi√©s dessert toute la commune de ${currentCity.cityName} et ses environs, garantissant des interventions rapides et efficaces pour tous vos travaux d'√©lectricit√©.`;

// --- UNCHANGED FRONTMATTER SECTIONS BELOW THIS LINE (Services, Pourquoi Choisir, etc. as you provided) ---
const servicesMainTitle = `Nos Services d'√âlectricit√© √† ${currentCity.cityName}`;
const servicesIntro = `Chez Elec Express, nous proposons une gamme compl√®te de services √©lectriques pour r√©pondre √† tous vos besoins √† ${currentCity.cityName} :`;
const cityServices = [
    { title: "D√©pannage √âlectrique Urgent 24h/7j", text: `Une panne de courant ou un court-circuit √† ${currentCity.cityName} ? Nos √©lectriciens interviennent rapidement pour diagnostiquer et r√©parer toute panne √©lectrique : disjoncteurs qui sautent, prises d√©faillantes, probl√®mes de tableau √©lectrique. Intervention garantie en moins de 2 heures pour assurer votre s√©curit√© et minimiser les d√©sagr√©ments.` },
    { title: "Installation √âlectrique Neuve et R√©novation", text: `Vous construisez ou r√©novez √† ${currentCity.cityName} ? Nous r√©alisons l'installation compl√®te de votre syst√®me √©lectrique conforme aux normes RGIE belges : tableau √©lectrique moderne, c√¢blage aux normes, prises et √©clairage optimis√©s. Chaque installation est personnalis√©e selon vos besoins et respecte les standards de s√©curit√© les plus stricts.` },
    { title: "Mise en Conformit√© √âlectrique RGIE", text: `Votre installation √† ${currentCity.cityName} n'est plus aux normes ? Nous effectuons le diagnostic complet et les travaux n√©cessaires pour obtenir votre certificat de conformit√© RGIE. Notre service inclut l'accompagnement lors du contr√¥le par l'organisme agr√©√© et la garantie de conformit√© de votre installation.` },
    { title: "Installation d'√âclairage LED et Solutions √âconomiques", text: `Pour votre domicile ou votre entreprise √† ${currentCity.cityName}, nous installons tous types de luminaires et syst√®mes d'√©clairage LED en optimisant la consommation d'√©nergie. Solutions d'√©clairage architectural, d√©coratif et fonctionnel pour valoriser tous vos espaces int√©rieurs et ext√©rieurs.` },
    { title: "Parlophonie et Vid√©ophonie Moderne", text: `S√©curisez l'acc√®s √† votre domicile ou b√¢timent √† ${currentCity.cityName} avec nos solutions d'interphones et vid√©ophones modernes. Syst√®mes filaires traditionnels ou connect√©s avec contr√¥le √† distance via smartphone, compatibles avec serrures √©lectriques.` },
    { title: "Domotique et Maison Connect√©e", text: `Rendez votre maison √† ${currentCity.cityName} plus intelligente et confortable gr√¢ce √† nos installations domotiques personnalis√©es. Gestion centralis√©e de l'√©clairage, chauffage, volets, alarme et autres √©quipements √©lectriques via smartphone ou tablette.` },
    { title: "Installation de Bornes de Recharge pour V√©hicules √âlectriques", text: `Vous poss√©dez un v√©hicule √©lectrique √† ${currentCity.cityName} ? Nous installons des bornes de recharge efficaces et s√©curis√©es, adapt√©es √† tous types de v√©hicules. Solutions pour particuliers et entreprises avec √©tude de faisabilit√© et syst√®mes intelligents de gestion.` }
];
const servicesSpecialisesTitle = "Services Sp√©cialis√©s Compl√©mentaires";
const servicesSpecialisesList = [
    "Tableaux √©lectriques : Installation, mise √† niveau et protection optimale",
    "Chauffage √©lectrique : Installation et maintenance de syst√®mes performants",
    "√âclairage de s√©curit√© : Solutions d'urgence et de balisage conformes",
    "R√©seaux informatiques : C√¢blage et installation de prises RJ45"
];

const pourquoiTitle = `Pourquoi Choisir Elec Express √† ${currentCity.cityName} ?`;
const pourquoiIntro = `Faire appel √† Elec Express pour vos travaux √©lectriques √† ${currentCity.cityName} pr√©sente de nombreux avantages :`;
const pourquoiPoints = [
    { title: "Rapidit√© d'Intervention Garantie", text: `Notre proximit√© nous permet d'intervenir plus rapidement en cas d'urgence √† ${currentCity.cityName}. D√©lais d'intervention optimis√©s avec √©quipes locales disponibles 24h/24 et 7j/7.` },
    { title: "Expertise Locale et Certifi√©e", text: `Nous connaissons les sp√©cificit√©s locales de ${currentCity.cityName} et les particularit√©s des installations √©lectriques courantes dans la r√©gion. Tous nos √©lectriciens sont certifi√©s et form√©s aux derni√®res normes RGIE.` },
    { title: "Flexibilit√© et Disponibilit√© Maximale", text: `Nous nous adaptons √† vos horaires pour les rendez-vous et les interventions √† ${currentCity.cityName}. Service personnalis√© avec suivi de chantier et conseil technique gratuit.` },
    { title: "Transparence Tarifaire Totale", text: `Devis gratuits, d√©taill√©s et sans engagement. Tarifs comp√©titifs et transparents sans frais cach√©s. Facturation claire avec d√©tail des prestations.` },
    { title: "Garantie Qualit√© et S√©curit√©", text: `Mat√©riel de qualit√© sup√©rieure, installation conforme RGIE et garantie sur tous nos travaux. Assurance responsabilit√© civile professionnelle pour votre tranquillit√©.` }
];

const delaisTitle = `D√©lais d'Intervention et Zone de Couverture autour de ${currentCity.cityName}`;
const delaisP1 = `Nous nous engageons √† intervenir dans les plus brefs d√©lais pour les urgences √©lectriques √† ${currentCity.cityName}, g√©n√©ralement en moins de 2 heures. Notre r√©activit√© est une priorit√© absolue pour tous nos clients.`;
const delaisP2 = `Zone d'intervention principale : Ensemble de la commune de ${currentCity.cityName} et communes limitrophes dans un rayon de 25 km.`;
const delaisP3 = `Communes voisines desservies : Nous intervenons √©galement dans les localit√©s proches de ${currentCity.cityName} avec les m√™mes d√©lais de r√©activit√©. Contactez-nous pour confirmer notre couverture dans votre zone sp√©cifique.`;

const tarifsTitle = `Exemples de Tarifs Indicatifs pour nos Prestations √† ${currentCity.cityName}`;
const tarifsIntro = `Nous privil√©gions la transparence tarifaire. Voici quelques exemples de tarifs estimatifs pour nos services d'√©lectricien √† ${currentCity.cityName} :`;
const tarifsList = [
    "Taux horaire d√©pannage (heures ouvrables) : 45‚Ç¨ - 65‚Ç¨",
    "Forfait diagnostic de panne : √† partir de 85‚Ç¨",
    "Mise en conformit√© RGIE (estimation/m¬≤) : 25‚Ç¨ - 45‚Ç¨",
    "Installation prise suppl√©mentaire : √† partir de 120‚Ç¨",
    "Remplacement tableau √©lectrique : 800‚Ç¨ - 1500‚Ç¨",
    "Installation borne de recharge : 1200‚Ç¨ - 2500‚Ç¨"
];
const tarifsOutro = `Ces prix sont indicatifs et peuvent varier selon la complexit√© du projet. Devis gratuit et personnalis√© disponible sous 24h pour tous vos projets √† ${currentCity.cityName}.`;

const temoignagesTitle = `T√©moignages de nos Clients Satisfaits √† ${currentCity.cityName}`;
const cityTemoignages = [
    { quote: `Panne √©lectrique totale un dimanche soir √† ${currentCity.cityName}. L'√©lectricien d'Elec Express est arriv√© en 1h30, a trouv√© le probl√®me rapidement et tout est rentr√© dans l'ordre. Service impeccable et tarif honn√™te !`, author: `Sophie Delcroix, ${currentCity.cityName}`, context: "Intervention remarquable en urgence" },
    { quote: `Nous avons confi√© la r√©novation √©lectrique compl√®te de notre maison ancienne √† ${currentCity.cityName} √† Elec Express. Travail soign√©, respect des d√©lais, conseils pr√©cieux et conformit√© RGIE obtenue du premier coup. Hautement recommand√© !`, author: `Marc et Isabelle Laurent, ${currentCity.cityName}`, context: "R√©novation √©lectrique compl√®te parfaite" },
    { quote: `Installation rapide et professionnelle de notre borne de recharge √† ${currentCity.cityName}. Devis clair, travail propre et explications d√©taill√©es du fonctionnement. Parfait pour notre Tesla !`, author: `Famille Dubois, ${currentCity.cityName}`, context: "Installation borne de recharge impeccable" },
    { quote: `Installation √©lectrique des ann√©es 80 √† mettre aux normes pour la vente. Elec Express a g√©r√© tout le processus, du diagnostic √† la certification. Travail irr√©prochable et d√©lais respect√©s.`, author: `Jean-Pierre Moreau, ${currentCity.cityName}`, context: "Mise aux normes efficace" }
];

const faqTitle = `Questions Fr√©quentes - √âlectricien √† ${currentCity.cityName}`;
const cityFaqItems = [
    { q: `Quels sont vos d√©lais d'intervention pour une urgence √©lectrique √† ${currentCity.cityName} ?`, a: `Pour les urgences √† ${currentCity.cityName}, nous intervenons g√©n√©ralement en moins de 2 heures, 24h/24 et 7j/7. Nos √©quipes locales permettent une r√©activit√© optimale m√™me les week-ends et jours f√©ri√©s.` },
    { q: `Proposez-vous des devis gratuits pour les travaux √©lectriques √† ${currentCity.cityName} ?`, a: `Oui, nous offrons des devis gratuits, d√©taill√©s et sans engagement pour tous les projets d'installation, r√©novation ou mise en conformit√© √† ${currentCity.cityName}. Estimation sur place ou √† distance selon la nature des travaux.` },
    { q: `√ätes-vous agr√©√© pour r√©aliser une mise en conformit√© RGIE √† ${currentCity.cityName} ?`, a: `Absolument. Nos √©lectriciens sont certifi√©s et agr√©√©s pour effectuer les mises aux normes RGIE. Nous vous accompagnons jusqu'√† l'obtention de votre certificat de conformit√© √† ${currentCity.cityName}.` },
    { q: `Intervenez-vous aussi le week-end et les jours f√©ri√©s √† ${currentCity.cityName} ?`, a: `Oui, nous assurons un service de d√©pannage 7j/7, y compris le week-end et les jours f√©ri√©s pour les urgences √©lectriques √† ${currentCity.cityName}. Tarifs major√©s appliqu√©s selon les horaires.` },
    { q: `Quelles garanties offrez-vous sur vos travaux √† ${currentCity.cityName} ?`, a: `Nous garantissons tous nos travaux √©lectriques : 2 ans sur la main d'≈ìuvre et selon garantie constructeur sur le mat√©riel. Assurance d√©cennale pour les gros travaux et responsabilit√© civile professionnelle.` },
    { q: `Acceptez-vous les paiements √©chelonn√©s pour les gros travaux ?`, a: `Oui, nous proposons des facilit√©s de paiement pour les projets importants √† ${currentCity.cityName} : acompte √† la commande, √©ch√©ancier selon avancement des travaux, possibilit√© de paiement en plusieurs fois.` }
];

const citySectionsTitle = `Nos zones d‚Äôintervention en ${currentCity.cityName}:`;

const finalCtaTitle = `Contactez Elec Express √† ${currentCity.cityName}`;
const finalCtaText = `N'attendez plus pour r√©soudre vos probl√®mes √©lectriques ou concr√©tiser vos projets √† ${currentCity.cityName} ! Pour une intervention rapide, un service de qualit√© et des conseils d'expert, faites confiance √† Elec Express.`;
const finalCtaButton1Text = `Demandez votre Devis Gratuit √† ${currentCity.cityName}`;
const finalCtaButton1Link = "/contact/";
const finalCtaButton2Text = `Urgence 24h/7j : 0470/42.42.42`;
const finalCtaButton2Link = "tel:+32470424242";

const meta_title = `√âlectricien ${currentCity.cityName} üí• Elec Express`;
const meta_description = `Besoin d'un √©lectricien fiable √† ${currentCity.cityName} ? ‚≠ê Intervention rapide 7j/7 pour d√©pannage, installation, mise en conformit√©. Demandez votre devis gratuit ‚òéÔ∏è 0470/42.42.42!`;
const schemaMarkup = generateSchema(meta_title, meta_description, 7);
---

<Layout meta_title={meta_title} meta_description={meta_description} schemaMarkup={schemaMarkup} >
    <section 
        class="relative bg-cover bg-center text-white"
        style={`background-image: url('${heroImageUrl}');`}
        role="img"
        aria-label=`√âlectricien ${currentCity.cityName}`
    >
        <div class="absolute inset-0 bg-blue-900 opacity-60"></div> 
        
        <div class="container mx-auto px-6 text-center py-20 md:py-32 relative z-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-white leading-tight mb-6">
                {h1Content}
            </h1>
            <p class="text-lg md:text-xl text-gray-100 mb-8 max-w-3xl mx-auto"> 
                {heroIntroP1}
            </p>

            <div class="flex justify-center items-center mb-8"> 
                <a href="tel:+32470424242" 
                   class="w-full sm:w-auto px-8 py-3 rounded-xl font-semibold shadow-md transition duration-300 ease-in-out bg-yellow-500 text-black hover:bg-yellow-600 text-lg">
                    0470/42.42.42
                </a>
            </div>

        </div>
    </section>
    <section class="py-16 md:py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-6">{servicesMainTitle}</h2>
            <p class="text-lg text-gray-700 text-center mb-12 max-w-3xl mx-auto">{servicesIntro}</p>
            <div class="mb-12 text-center">
                <img 
                    src= "/homepage/electrician-state.avif"
                    alt={`Nos Services d'√âlectricit√© √† ${currentCity.cityName}`}
                    class="mx-auto rounded-lg shadow-lg max-h-80 w-auto object-contain" 
                    loading="lazy"
                /> 
            </div>
            <div class="grid md:grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-10 mb-12"> 
                {cityServices.map(service => (
                    <div class="bg-white p-6 rounded-2xl shadow-xl">
                        <h3 class="text-xl font-semibold text-yellow-700 mb-3">{service.title}</h3>
                        <p class="text-gray-600 leading-relaxed">{service.text}</p>
                    </div>
                ))}
            </div>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <h3 class="text-2xl font-semibold text-gray-800 mb-6 text-center md:text-left">{servicesSpecialisesTitle}</h3>
                <ul class="list-disc list-inside text-gray-600 space-y-2 columns-1 md:columns-2 sm:text-base text-sm">
                    {servicesSpecialisesList.map(item => <li>{item}</li>)}
                </ul>
            </div>
        </div>
    </section>

    {/* Pourquoi Choisir Section - Unchanged */}
    <section class="py-16 md:py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-6">{pourquoiTitle}</h2>
            <p class="text-lg text-gray-700 text-center mb-12 max-w-3xl mx-auto">{pourquoiIntro}</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {pourquoiPoints.map(point => (
                    <div class="bg-white p-6 rounded-2xl shadow-xl h-full">
                        <h3 class="text-xl font-semibold text-yellow-700 mb-2">{point.title}</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">{point.text}</p>
                    </div>
                ))}
            </div>
        </div>
    </section>

    {/* D√©lais et Zone Section - Unchanged */}
    <section class="py-16 md:py-20 bg-white">
        <div class="container mx-auto px-6 max-w-3xl">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-6">{delaisTitle}</h2>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl space-y-4 text-gray-700 leading-relaxed">
                <p>{delaisP1}</p>
                <p>{delaisP2}</p>
                <p>{delaisP3}</p>
            </div>
        </div>
    </section>

    {/* Tarifs Section - Unchanged */}
    <section class="py-16 md:py-20 bg-white">
        <div class="container mx-auto px-6 max-w-3xl">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-6">{tarifsTitle}</h2>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <p class="text-gray-700 mb-6 leading-relaxed">{tarifsIntro}</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mb-6">
                    {tarifsList.map(item => <li>{item}</li>)}
                </ul>
                <p class="text-gray-700 font-medium italic">{tarifsOutro}</p>
            </div>
        </div>
    </section>

    {/* T√©moignages Section - Unchanged */}
    <section class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12">{temoignagesTitle}</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-8">
                {cityTemoignages.map(testimonial => (
                    <div class="bg-white p-8 rounded-2xl shadow-xl text-left">
                        <p class="text-gray-700 font-semibold mb-2">"{testimonial.context}"</p>
                        <p class="text-gray-600 italic mb-4">"{testimonial.quote}"</p>
                        <p class="text-right font-medium text-gray-800">- {testimonial.author}</p>
                    </div>
                ))}
            </div>
        </div>
    </section>

    {/* Questions Fr√©quentes Section - Unchanged */}
    <section class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-6 max-w-3xl">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12">{faqTitle}</h2>
            <div class="space-y-6">
                {cityFaqItems.map((item, index) => (
                    <details class="bg-white p-4 md:p-6 rounded-2xl shadow-xl group" open={index === 0}>
                        <summary class="flex justify-between items-center font-semibold text-yellow-700 cursor-pointer hover:text-yellow-800 list-none">
                            <span>{item.q}</span>
                            <span class="transform transition-transform duration-300 group-open:rotate-180 text-yellow-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </span>
                        </summary>
                        <p class="text-gray-600 mt-3 leading-relaxed">{item.a}</p>
                    </details>
                ))}
            </div>
        </div>
    </section>

    {/* City Sections List - Unchanged */}
    {currentCity.sections && currentCity.sections.length > 0 && (
        <section class="py-16 md:py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-6">{citySectionsTitle}</h2>
                <div class="flex flex-wrap justify-center gap-3 sm:gap-4 mb-8">
                    {currentCity.sections.map(section => (
                        <a href={`/electricien-${currentCity.slug}/${section.slug}/`} class="block bg-white text-gray-700 px-4 py-2 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-100 hover:text-yellow-500 transition-all duration-200 text-sm">
                            {section.name}
                        </a>
                    ))}
                </div>
            </div>
        </section>
    )}

    {/* Final CTA Section - Unchanged (as per your provided code) */}
    <section class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-6 text-center">
            <div class="bg-white p-8 md:p-12 rounded-3xl shadow-2xl max-w-3xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">{finalCtaTitle}</h2>
                <p class="text-lg text-gray-700 mb-10">{finalCtaText}</p>
                <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6">
                     <a href={finalCtaButton2Link} 
                       class="px-8 py-3 rounded-xl font-semibold shadow-md transition duration-300 ease-in-out border-2 border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-white text-lg">
                        {finalCtaButton2Text}
                    </a>
                    <a href={finalCtaButton1Link} 
                       class="px-8 py-3 rounded-xl font-semibold shadow-md transition duration-300 ease-in-out bg-yellow-500 text-white hover:bg-yellow-700 text-lg">
                        {finalCtaButton1Text}
                    </a>
                </div>
            </div>
        </div>
    </section>
</Layout>